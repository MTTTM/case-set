<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>无标题文档</title>
    <style>
        @-webkit-keyframes move1
        {
            0%
            {
                top:0;
            }
            100%
            {
                top:8px;
            }
        }
        @-webkit-keyframes move2
        {
            0%
            {
                -webkit-transform:rotate(0deg);
            }
            100%
            {
                -webkit-transform:rotate(-360deg);
            }
        }
        @-webkit-keyframes move2
        {
            0%
            {
                -webkit-transform:rotate(0deg);
            }
            100%
            {
                -webkit-transform:rotate(-360deg);
            }
        }
        @-webkit-keyframes move3
        {
            0%
            {
                -webkit-transform:rotate(0deg);
            }
            100%
            {
                -webkit-transform:rotate(360deg);
            }
        }

        #loading{width:120px;height:140px;position:fixed; left:calc(50% - 60px);top:calc(50% - 70px);}
        #load{width:120px;height:100px;background:url(loding/loading3.png) no-repeat; position:absolute;top:0;left:0; -webkit-animation:.5s move1 infinite alternate linear; }
        #loadIco1{width:120px;height:100px; position:absolute;left:0;top:0;background:url(loding/loading4.png) no-repeat;-webkit-animation:1.2s move2 infinite linear;}
        #loadIco2{ width:120px;height:100px; position:absolute;left:0;top:0;background:url(loding/loading5.png) no-repeat;-webkit-animation:1.2s move3 infinite linear;}
        #loadtext{ width:120px;height:100px; position:absolute;left:0;top:0; text-align:center; line-height:100px; font:bold 16px/100px Arial; color:#f9725c;}
        #loadShadow{width:100px;height:40px; position:absolute;left:10px; bottom:0; background:url(loding/loading2.png) no-repeat;}
    </style>
</head>
<body>
<div id="loading">
    <div id="load">
        <div id="loadIco1"></div>
        <div id="loadIco2"></div>
        <div id="loadtext">0%</div>
    </div>
    <div id="loadShadow"></div>
</div>
<script>
    var oText=document.getElementById("loadtext");
    var oloadtext=document.getElementById("loadtext");
    var oload=document.getElementById("load");
    var oloadIco1=document.getElementById("loadIco1");
    var oloadIco2=document.getElementById("loadIco2");
    var iLength=0;
    var aPic=["http://pic3.nipic.com/20090602/846299_152058002_2.jpg","http://img1.jisu4.com:789/tukuhxd57/uploads/allimg/140917/1F935L58_0.jpg","http://img1.jisu4.com:789/tukuhxd57/uploads/allimg/140917/1F9301240_1.jpg","http://img1.jisu4.com:789/tukuhxd57/uploads/allimg/140917/1F9301240_0.jpg"];
    for(var i=0;i<aPic.length;i++)
    {
        var oImg=new Image();
        oImg.src=aPic[i];
        oImg.index=i;//给图片添加索引，让图片没有加载进来的时候可以判断
        oImg.onload=function()
        {
            iLength++;
            oText.innerHTML=iLength/aPic.length*100+"%";
            if(iLength==aPic.length)//完全加载后暂停加载动画
            {
                oload.style.WebkitAnimationPlayState="paused";
                oloadIco1.style.WebkitAnimationPlayState="paused";
                oloadIco2.style.WebkitAnimationPlayState="paused";
            }
        }
        oImg.onerror=function()//有图片没有加载进来的时候
        {
           // alert(oImg.index);//这里可以得到没有加载进来的图片，可以对他进行替换处理
          iLength++;
            oloadtext.innerHTML=parseInt(iLength/aUrl.length*100)+"%";
            if(iLength==aUrl.length)
            {
                oload.style.WebkitAnimationPlayState="paused";
                oloadIco1.style.WebkitAnimationPlayState="paused";
                oloadIco2.style.WebkitAnimationPlayState="paused";
            }
        };
    }
</script>
</body>
</html>
